{"version":3,"sources":["../../../src/frameworks/tunnel.ts","../../../src/frameworks/beam-config.ts","../../../src/frameworks/astro/index.ts"],"sourcesContent":["/**\n * Shared Tunnel Logic for Framework Integrations\n *\n * Provides a simple API to start/stop tunnels from framework plugins.\n */\n\nimport { spawn, execSync, ChildProcess } from \"child_process\";\nimport Conf from \"conf\";\nimport clipboard from \"clipboardy\";\nimport qrcode from \"qrcode-terminal\";\n\nconst config = new Conf({\n  projectName: \"beam\",\n  schema: {\n    email: { type: \"string\" },\n    sessionToken: { type: \"string\" },\n    apiUrl: { type: \"string\", default: \"https://beam.byronwade.com\" },\n  },\n});\n\nconst API_URL = (config.get(\"apiUrl\") as string) || \"https://beam.byronwade.com\";\n\nexport interface TunnelOptions {\n  port: number;\n  subdomain?: string;\n  inspect?: boolean;\n  auth?: string;\n  copyToClipboard?: boolean;\n  qr?: boolean;\n  webhook?: boolean;\n  name?: string;\n  framework?: string;\n}\n\nexport interface TunnelInfo {\n  id: string;\n  url: string;\n  port: number;\n  inspectorUrl?: string;\n  dashboardUrl?: string;\n  isTracked: boolean;\n}\n\ninterface ActiveTunnel {\n  id: string;\n  process: ChildProcess;\n  url: string;\n  port: number;\n}\n\nconst activeTunnels = new Map<string, ActiveTunnel>();\n\n/**\n * Check if cloudflared is installed\n */\nfunction checkCloudflared(): boolean {\n  try {\n    execSync(\"cloudflared --version\", { stdio: \"pipe\" });\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Get current login status\n */\nfunction getLoginStatus(): { email: string; token: string } | null {\n  const email = config.get(\"email\") as string;\n  const token = config.get(\"sessionToken\") as string;\n\n  if (!email || !token) {\n    return null;\n  }\n\n  return { email, token };\n}\n\n/**\n * Start a tunnel\n */\nexport async function startTunnel(options: TunnelOptions): Promise<TunnelInfo> {\n  // Check cloudflared\n  if (!checkCloudflared()) {\n    throw new Error(\n      \"cloudflared is not installed. Install it first:\\n\" +\n        \"  macOS: brew install cloudflared\\n\" +\n        \"  Other: https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/get-started/create-local-tunnel/\"\n    );\n  }\n\n  const auth = getLoginStatus();\n  const isTracked = auth !== null;\n\n  // Generate tunnel ID\n  const tunnelId = `${options.framework || \"beam\"}-${options.port}-${Date.now()}`;\n\n  // Start cloudflared process\n  const args = [\"tunnel\", \"--url\", `http://localhost:${options.port}`];\n\n  const cloudflaredProcess = spawn(\"cloudflared\", args, {\n    stdio: [\"pipe\", \"pipe\", \"pipe\"],\n  });\n\n  // Wait for tunnel URL\n  const tunnelUrl = await new Promise<string>((resolve, reject) => {\n    let output = \"\";\n    const timeout = setTimeout(() => {\n      reject(new Error(\"Timeout waiting for tunnel URL\"));\n    }, 30000);\n\n    const handleOutput = (data: Buffer) => {\n      output += data.toString();\n      const match = output.match(/https:\\/\\/[a-z0-9-]+\\.trycloudflare\\.com/);\n      if (match) {\n        clearTimeout(timeout);\n        resolve(match[0]);\n      }\n    };\n\n    cloudflaredProcess.stdout?.on(\"data\", handleOutput);\n    cloudflaredProcess.stderr?.on(\"data\", handleOutput);\n\n    cloudflaredProcess.on(\"error\", (err) => {\n      clearTimeout(timeout);\n      reject(err);\n    });\n\n    cloudflaredProcess.on(\"exit\", (code) => {\n      if (code !== 0 && !output.includes(\"trycloudflare.com\")) {\n        clearTimeout(timeout);\n        reject(new Error(`cloudflared exited with code ${code}`));\n      }\n    });\n  });\n\n  // Store active tunnel\n  activeTunnels.set(tunnelId, {\n    id: tunnelId,\n    process: cloudflaredProcess,\n    url: tunnelUrl,\n    port: options.port,\n  });\n\n  // Register with API if logged in\n  let dashboardUrl: string | undefined;\n  if (isTracked && auth) {\n    try {\n      const response = await fetch(`${API_URL}/api/tunnels`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${auth.token}`,\n        },\n        body: JSON.stringify({\n          name: options.name || `${options.framework}-${options.port}`,\n          port: options.port,\n          type: \"quick\",\n          quickTunnelUrl: tunnelUrl,\n          framework: options.framework,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        dashboardUrl = `${API_URL}/dashboard/tunnels/${data.tunnelId}`;\n      }\n    } catch {\n      // Silently fail API registration\n    }\n  }\n\n  // Copy to clipboard if requested\n  if (options.copyToClipboard) {\n    try {\n      await clipboard.write(tunnelUrl);\n      console.log(\"  \\u2713 Tunnel URL copied to clipboard\");\n    } catch {\n      // Clipboard might not be available\n    }\n  }\n\n  // Show QR code if requested\n  if (options.qr) {\n    console.log(\"\");\n    qrcode.generate(tunnelUrl, { small: true });\n    console.log(\"  Scan to open on mobile\");\n    console.log(\"\");\n  }\n\n  return {\n    id: tunnelId,\n    url: tunnelUrl,\n    port: options.port,\n    inspectorUrl: options.inspect ? \"http://localhost:4040\" : undefined,\n    dashboardUrl,\n    isTracked,\n  };\n}\n\n/**\n * Stop a tunnel by ID\n */\nexport async function stopTunnel(tunnelId: string): Promise<void> {\n  const tunnel = activeTunnels.get(tunnelId);\n  if (tunnel) {\n    tunnel.process.kill(\"SIGTERM\");\n    activeTunnels.delete(tunnelId);\n  }\n}\n\n/**\n * Stop all active tunnels\n */\nexport async function stopAllTunnels(): Promise<void> {\n  for (const [id] of activeTunnels) {\n    await stopTunnel(id);\n  }\n}\n\n/**\n * Get all active tunnels\n */\nexport function getActiveTunnels(): TunnelInfo[] {\n  return Array.from(activeTunnels.values()).map((t) => ({\n    id: t.id,\n    url: t.url,\n    port: t.port,\n    isTracked: false,\n  }));\n}\n","/**\n * Beam Configuration Loader\n *\n * Loads Beam configuration from multiple sources:\n * 1. beam.config.js / beam.config.mjs\n * 2. package.json \"beam\" field\n * 3. Environment variables\n * 4. Options passed to the integration\n */\n\nimport { readFileSync, existsSync } from \"fs\";\nimport { join } from \"path\";\nimport { pathToFileURL } from \"url\";\n\nexport interface BeamIntegrationConfig {\n  /** Enable/disable Beam (default: true) */\n  enabled?: boolean;\n\n  /** Port to tunnel (auto-detected if not specified) */\n  port?: number;\n\n  /** Use a reserved subdomain */\n  subdomain?: string;\n\n  /** Enable request inspector */\n  inspect?: boolean;\n\n  /** Basic auth (user:pass) */\n  auth?: string;\n\n  /** Auto-copy tunnel URL to clipboard */\n  copyToClipboard?: boolean;\n\n  /** Show QR code in terminal */\n  qr?: boolean;\n\n  /** Webhook capture mode */\n  webhook?: boolean;\n\n  /** Tunnel name */\n  name?: string;\n}\n\n/**\n * Load Beam configuration from all sources\n */\nexport function loadBeamConfig(options?: BeamIntegrationConfig): BeamIntegrationConfig {\n  const projectPath = process.cwd();\n\n  // Start with defaults\n  let config: BeamIntegrationConfig = {\n    enabled: true,\n    inspect: false,\n    copyToClipboard: false,\n    qr: false,\n    webhook: false,\n  };\n\n  // Load from beam.config.js if exists\n  const configFile = findConfigFile(projectPath);\n  if (configFile) {\n    try {\n      const fileConfig = loadConfigFile(configFile);\n      config = { ...config, ...fileConfig };\n    } catch (error) {\n      console.warn(\"Beam: Failed to load config file:\", error);\n    }\n  }\n\n  // Load from package.json \"beam\" field\n  const packageJsonPath = join(projectPath, \"package.json\");\n  if (existsSync(packageJsonPath)) {\n    try {\n      const packageJson = JSON.parse(readFileSync(packageJsonPath, \"utf-8\"));\n      if (packageJson.beam && typeof packageJson.beam === \"object\") {\n        config = { ...config, ...packageJson.beam };\n      }\n    } catch {\n      // Ignore package.json errors\n    }\n  }\n\n  // Load from environment variables\n  config = {\n    ...config,\n    ...loadEnvConfig(),\n  };\n\n  // Apply options passed to integration (highest priority)\n  if (options) {\n    config = { ...config, ...options };\n  }\n\n  return config;\n}\n\n/**\n * Find config file in project\n */\nfunction findConfigFile(projectPath: string): string | null {\n  const configFiles = [\n    \"beam.config.js\",\n    \"beam.config.mjs\",\n    \"beam.config.cjs\",\n    \"beam.config.ts\",\n  ];\n\n  for (const file of configFiles) {\n    const filePath = join(projectPath, file);\n    if (existsSync(filePath)) {\n      return filePath;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Load config from file\n */\nfunction loadConfigFile(filePath: string): BeamIntegrationConfig {\n  // For .js and .mjs files, use dynamic import\n  if (filePath.endsWith(\".mjs\") || filePath.endsWith(\".js\")) {\n    // Use require for CommonJS compatibility\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-var-requires\n      const config = require(filePath);\n      return config.default || config;\n    } catch {\n      // If require fails, it might be ESM - we'll handle this differently\n      return {};\n    }\n  }\n\n  // For other files, just return empty (TypeScript needs transpilation)\n  return {};\n}\n\n/**\n * Load config from environment variables\n */\nfunction loadEnvConfig(): Partial<BeamIntegrationConfig> {\n  const config: Partial<BeamIntegrationConfig> = {};\n\n  if (process.env.BEAM_DISABLED === \"true\") {\n    config.enabled = false;\n  }\n\n  if (process.env.BEAM_PORT) {\n    config.port = parseInt(process.env.BEAM_PORT, 10);\n  }\n\n  if (process.env.BEAM_SUBDOMAIN) {\n    config.subdomain = process.env.BEAM_SUBDOMAIN;\n  }\n\n  if (process.env.BEAM_INSPECT === \"true\") {\n    config.inspect = true;\n  }\n\n  if (process.env.BEAM_AUTH) {\n    config.auth = process.env.BEAM_AUTH;\n  }\n\n  if (process.env.BEAM_COPY === \"true\") {\n    config.copyToClipboard = true;\n  }\n\n  if (process.env.BEAM_QR === \"true\") {\n    config.qr = true;\n  }\n\n  if (process.env.BEAM_WEBHOOK === \"true\") {\n    config.webhook = true;\n  }\n\n  if (process.env.BEAM_NAME) {\n    config.name = process.env.BEAM_NAME;\n  }\n\n  return config;\n}\n","/**\n * Astro Integration for Beam\n *\n * Automatically starts a tunnel when Astro dev server starts.\n *\n * Usage:\n *   // astro.config.mjs\n *   import beam from '@byronwade/beam/astro';\n *\n *   export default {\n *     integrations: [beam()],\n *   };\n */\n\nimport { startTunnel, stopTunnel, TunnelInfo } from \"../tunnel.js\";\nimport { loadBeamConfig, BeamIntegrationConfig } from \"../beam-config.js\";\n\n// Astro integration type (avoiding hard dependency on astro package)\ninterface AstroIntegration {\n  name: string;\n  hooks: {\n    \"astro:server:setup\"?: (options: { server: any; logger: any }) => void | Promise<void>;\n    \"astro:server:done\"?: () => void | Promise<void>;\n  };\n}\n\ninterface BeamAstroOptions extends BeamIntegrationConfig {\n  // Astro specific options can go here\n}\n\nlet activeTunnel: TunnelInfo | null = null;\n\n/**\n * Astro integration for Beam tunnel\n */\nexport function beam(options?: BeamAstroOptions): AstroIntegration {\n  const beamConfig = loadBeamConfig(options);\n\n  return {\n    name: \"beam\",\n\n    hooks: {\n      \"astro:server:setup\": async ({ server, logger }) => {\n        // Check if Beam is disabled\n        if (beamConfig.enabled === false || process.env.BEAM_DISABLED === \"true\") {\n          return;\n        }\n\n        // Wait for server to be listening\n        server.httpServer?.once(\"listening\", async () => {\n          try {\n            const address = server.httpServer?.address();\n            let port = beamConfig.port || 4321;\n\n            // Get actual port from server\n            if (address && typeof address === \"object\") {\n              port = address.port;\n            }\n\n            activeTunnel = await startTunnel({\n              port,\n              subdomain: beamConfig.subdomain,\n              inspect: beamConfig.inspect,\n              auth: beamConfig.auth,\n              copyToClipboard: beamConfig.copyToClipboard,\n              qr: beamConfig.qr,\n              framework: \"astro\",\n            });\n\n            // Log tunnel URL\n            logTunnelUrl(activeTunnel, logger);\n          } catch (error) {\n            logger.error(\"Beam: Failed to start tunnel: \" + error);\n          }\n        });\n      },\n\n      \"astro:server:done\": async () => {\n        if (activeTunnel) {\n          await stopTunnel(activeTunnel.id);\n          activeTunnel = null;\n        }\n      },\n    },\n  };\n}\n\n/**\n * Log tunnel URL in Astro style\n */\nfunction logTunnelUrl(tunnel: TunnelInfo, logger: any): void {\n  logger.info(\"\");\n  logger.info(\"\\u26A1 Beam tunnel active\");\n  logger.info(`   Tunnel:    ${tunnel.url}`);\n\n  if (tunnel.inspectorUrl) {\n    logger.info(`   Inspector: ${tunnel.inspectorUrl}`);\n  }\n\n  if (tunnel.dashboardUrl) {\n    logger.info(`   Dashboard: ${tunnel.dashboardUrl}`);\n  }\n\n  logger.info(\"\");\n}\n\n// Default export\nexport default beam;\n"],"mappings":"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","names":["config"]}